import os
import http
import json
from datetime import date


def get_odds():
    # conn = http.client.HTTPSConnection("sportspage-feeds.p.rapidapi.com")
    # key = os.environ["API_KEY"]
    # headers = {
    #     'X-RapidAPI-Key': key,
    #     'X-RapidAPI-Host': "sportspage-feeds.p.rapidapi.com"
    # }
    # today = str(date.today())
    # conn.request("GET", "/games?odds=moneyline&status=scheduled&league=MLB&date="+today, headers=headers)
    #
    # res = conn.getresponse()
    # data = res.read()
    # dataStr = data.decode("utf-8").replace("'", '"')
    dataStr = '{"status":200,"time":"2023-08-17T17:08:46.976Z","games":6,"skip":0,"results":[{"summary":"Seattle Mariners @ Kansas City Royals","details":{"league":"MLB","seasonType":"regular","season":2023,"conferenceGame":true,"divisionGame":false},"schedule":{"date":"2023-08-17T18:10:00.000Z","tbaTime":false},"status":"scheduled","teams":{"away":{"team":"Seattle Mariners","location":"Seattle","mascot":"Mariners","abbreviation":"SEA","conference":"American League","division":"West"},"home":{"team":"Kansas City Royals","location":"Kansas City","mascot":"Royals","abbreviation":"KC","conference":"American League","division":"Central"}},"lastUpdated":"2023-08-17T17:08:45.107Z","gameId":296822,"venue":{"name":"Kauffman Stadium","neutralSite":false,"city":"Kansas City","state":"MO"},"odds":[{"spread":{"open":{"away":-1.5,"home":1.5,"awayOdds":-125,"homeOdds":105},"current":{"away":-1.5,"home":1.5,"awayOdds":-130,"homeOdds":110}},"moneyline":{"open":{"awayOdds":-233,"homeOdds":188},"current":{"awayOdds":-221,"homeOdds":184}},"total":{"open":{"total":9,"overOdds":-115,"underOdds":-105},"current":{"total":9,"overOdds":-110,"underOdds":-115}},"openDate":"2023-08-17T08:18:16.807Z","lastUpdated":"2023-08-17T17:05:11.910Z"}]},{"summary":"Boston Red Sox @ Washington Nationals","details":{"league":"MLB","seasonType":"regular","season":2023,"conferenceGame":false,"divisionGame":false},"schedule":{"date":"2023-08-17T20:05:00.000Z","tbaTime":false},"status":"scheduled","teams":{"away":{"team":"Boston Red Sox","location":"Boston","mascot":"Red Sox","abbreviation":"BOS","conference":"American League","division":"East"},"home":{"team":"Washington Nationals","location":"Washington","mascot":"Nationals","abbreviation":"WSH","conference":"National League","division":"East"}},"lastUpdated":"2023-08-17T17:08:45.161Z","gameId":296824,"venue":{"name":"Nationals Park","neutralSite":false,"city":"Washington","state":"DC"},"odds":[{"spread":{"open":{"away":-1.5,"home":1.5,"awayOdds":-120,"homeOdds":-100},"current":{"away":-1.5,"home":1.5,"awayOdds":-120,"homeOdds":-100}},"moneyline":{"open":{"awayOdds":-190,"homeOdds":160},"current":{"awayOdds":-189,"homeOdds":158}},"total":{"open":{"total":9.5,"overOdds":-100,"underOdds":-120},"current":{"total":9.5,"overOdds":-110,"underOdds":-110}},"openDate":"2023-08-16T21:14:21.707Z","lastUpdated":"2023-08-17T17:05:11.980Z"}]},{"summary":"New York Mets @ St. Louis Cardinals","details":{"league":"MLB","seasonType":"regular","season":2023,"conferenceGame":true,"divisionGame":false},"schedule":{"date":"2023-08-17T23:15:00.000Z","tbaTime":false},"status":"scheduled","teams":{"away":{"team":"New York Mets","location":"New York","mascot":"Mets","abbreviation":"NYM","conference":"National League","division":"East"},"home":{"team":"St. Louis Cardinals","location":"St. Louis","mascot":"Cardinals","abbreviation":"STL","conference":"National League","division":"Central"}},"lastUpdated":"2023-08-17T17:08:45.204Z","gameId":296826,"venue":{"name":"Busch Stadium","neutralSite":false,"city":"St. Louis","state":"MO"},"odds":[{"spread":{"open":{"away":-1.5,"home":1.5,"awayOdds":125,"homeOdds":-160},"current":{"away":-1.5,"home":1.5,"awayOdds":115,"homeOdds":-135}},"moneyline":{"open":{"awayOdds":-120,"homeOdds":102},"current":{"awayOdds":-134,"homeOdds":113}},"total":{"open":{"total":10,"overOdds":-120,"underOdds":-105},"current":{"total":10,"overOdds":-115,"underOdds":-105}},"openDate":"2023-08-16T22:34:17.336Z","lastUpdated":"2023-08-17T17:05:12.130Z"}]},{"summary":"Detroit Tigers @ Cleveland Guardians","details":{"league":"MLB","seasonType":"regular","season":2023,"conferenceGame":true,"divisionGame":true},"schedule":{"date":"2023-08-17T23:15:00.000Z","tbaTime":false},"status":"scheduled","teams":{"away":{"team":"Detroit Tigers","location":"Detroit","mascot":"Tigers","abbreviation":"DET","conference":"American League","division":"Central"},"home":{"team":"Cleveland Guardians","location":"Cleveland","mascot":"Guardians","abbreviation":"CLE","conference":"American League","division":"Central"}},"lastUpdated":"2023-08-17T17:08:45.255Z","gameId":296828,"venue":{"name":"Progressive Field","neutralSite":false,"city":"Cleveland","state":"OH"},"odds":[{"spread":{"open":{"away":-1.5,"home":1.5,"awayOdds":150,"homeOdds":-185},"current":{"away":-1.5,"home":1.5,"awayOdds":120,"homeOdds":-140}},"moneyline":{"open":{"awayOdds":-113,"homeOdds":-105},"current":{"awayOdds":-137,"homeOdds":115}},"total":{"open":{"total":8.5,"overOdds":-115,"underOdds":-110},"current":{"total":8.5,"overOdds":-115,"underOdds":-110}},"openDate":"2023-08-16T22:34:17.394Z","lastUpdated":"2023-08-17T17:05:12.062Z"}]},{"summary":"Arizona Diamondbacks @ San Diego Padres","details":{"league":"MLB","seasonType":"regular","season":2023,"conferenceGame":true,"divisionGame":true},"schedule":{"date":"2023-08-18T01:40:00.000Z","tbaTime":false},"status":"scheduled","teams":{"away":{"team":"Arizona Diamondbacks","location":"Arizona","mascot":"Diamondbacks","abbreviation":"ARI","conference":"National League","division":"West"},"home":{"team":"San Diego Padres","location":"San Diego","mascot":"Padres","abbreviation":"SD","conference":"National League","division":"West"}},"lastUpdated":"2023-08-17T17:08:45.301Z","gameId":296830,"venue":{"name":"Petco Park","neutralSite":false,"city":"San Diego","state":"CA"},"odds":[{"spread":{"open":{"away":-1.5,"home":1.5,"awayOdds":140,"homeOdds":-170},"current":{"away":-1.5,"home":1.5,"awayOdds":150,"homeOdds":-180}},"moneyline":{"open":{"awayOdds":-119,"homeOdds":-102},"current":{"awayOdds":-109,"homeOdds":-109}},"total":{"open":{"total":8.5,"overOdds":-105,"underOdds":-115},"current":{"total":8.5,"overOdds":-105,"underOdds":-115}},"openDate":"2023-08-17T00:07:30.396Z","lastUpdated":"2023-08-17T17:05:12.215Z"}]},{"summary":"Milwaukee Brewers @ Los Angeles Dodgers","details":{"league":"MLB","seasonType":"regular","season":2023,"conferenceGame":true,"divisionGame":false},"schedule":{"date":"2023-08-18T02:10:00.000Z","tbaTime":false},"status":"scheduled","teams":{"away":{"team":"Milwaukee Brewers","location":"Milwaukee","mascot":"Brewers","abbreviation":"MIL","conference":"National League","division":"Central"},"home":{"team":"Los Angeles Dodgers","location":"Los Angeles","mascot":"Dodgers","abbreviation":"LAD","conference":"National League","division":"West"}},"lastUpdated":"2023-08-17T17:08:45.369Z","gameId":296832,"venue":{"name":"Dodger Stadium","neutralSite":false,"city":"Los Angeles","state":"CA"},"odds":[{"spread":{"open":{"away":1.5,"home":-1.5,"awayOdds":-200,"homeOdds":155},"current":{"away":1.5,"home":-1.5,"awayOdds":-170,"homeOdds":145}},"moneyline":{"open":{"awayOdds":117,"homeOdds":-138},"current":{"awayOdds":124,"homeOdds":-147}},"total":{"open":{"total":8.5,"overOdds":-115,"underOdds":-105},"current":{"total":8.5,"overOdds":-105,"underOdds":-115}},"openDate":"2023-08-16T22:34:17.471Z","lastUpdated":"2023-08-17T17:05:12.281Z"}]}]}'
    dataList = json.loads(dataStr)

    return dataList